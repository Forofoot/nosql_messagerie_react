[{"C:\\Users\\erwan\\nosql_mango\\client\\src\\index.js":"1","C:\\Users\\erwan\\nosql_mango\\client\\src\\App.js":"2","C:\\Users\\erwan\\nosql_mango\\client\\src\\reportWebVitals.js":"3","C:\\Users\\erwan\\nosql_mango\\client\\src\\containers\\Room.js":"4"},{"size":808,"mtime":1684329420660,"results":"5","hashOfConfig":"6"},{"size":2005,"mtime":1684335490868,"results":"7","hashOfConfig":"6"},{"size":362,"mtime":1684319466201,"results":"8","hashOfConfig":"6"},{"size":1811,"mtime":1684335577317,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","suppressedMessages":"12","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1ucypri",{"filePath":"13","messages":"14","suppressedMessages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23"},"C:\\Users\\erwan\\nosql_mango\\client\\src\\index.js",[],[],"C:\\Users\\erwan\\nosql_mango\\client\\src\\App.js",["24","25"],[],"C:\\Users\\erwan\\nosql_mango\\client\\src\\reportWebVitals.js",[],[],[],"C:\\Users\\erwan\\nosql_mango\\client\\src\\containers\\Room.js",["26"],[],"import React, {useEffect, useState} from 'react'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nexport default function Room() {\r\n    \r\n  const [room, setRoom] = useState('')\r\n  const [messages, setMessages] = useState('')\r\n  const [message, setMessage] = useState('')\r\n  const slug = useParams()\r\n  \r\n  async function getFromServer() {\r\n    const response = await fetch(`/api/room/${slug.id}`)\r\n    const data = await response.json()\r\n    setRoom(data)\r\n  }\r\n\r\n  async function getMessages() {\r\n    const response = await fetch(`/api/room/messages/${slug.id}`)\r\n    const data = await response.json()\r\n    setMessages(data)\r\n}\r\n\r\n  async function postToServer(e) {\r\n    e.preventDefault()\r\n    if (localStorage.getItem('user') === null) {\r\n        alert('Vous devez être connecté pour envoyer un message')\r\n        return\r\n    }\r\n    const response = await fetch(`/api/message/${slug.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({message: message, user: localStorage.getItem('user')})\r\n    })\r\n    setMessage('')\r\n    const data = await response.json()\r\n    console.log(data)\r\n}\r\n\r\n\r\n  useEffect(() => {\r\n    getFromServer()\r\n    setInterval(() => {\r\n        getMessages()\r\n    }, 1000)\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n        <h1>{room?.name}</h1>\r\n\r\n        {messages && messages.map((message, index) => {\r\n            return <p key={index}><strong>{message?.user}</strong> : {message.message}</p>\r\n        })}\r\n\r\n        <form onSubmit={(e) => postToServer(e)}>\r\n            <input type=\"text\" name=\"message\" id=\"message\" onChange={(e) => setMessage(e.target.value)} placeholder='Message' value={message}/>\r\n\r\n            <button type=\"submit\">Envoyer</button>\r\n        </form>\r\n    </div>\r\n    )\r\n}\r\n",{"ruleId":"27","severity":1,"message":"28","line":1,"column":8,"nodeType":"29","messageId":"30","endLine":1,"endColumn":12},{"ruleId":"27","severity":1,"message":"31","line":3,"column":10,"nodeType":"29","messageId":"30","endLine":3,"endColumn":14},{"ruleId":"32","severity":1,"message":"33","line":47,"column":6,"nodeType":"34","endLine":47,"endColumn":8,"suggestions":"35"},"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'Link' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getFromServer' and 'getMessages'. Either include them or remove the dependency array.","ArrayExpression",["36"],{"desc":"37","fix":"38"},"Update the dependencies array to be: [getFromServer, getMessages]",{"range":"39","text":"40"},[1294,1296],"[getFromServer, getMessages]"]